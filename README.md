# 算命学×マヤ暦コンサルシステム

算命学とマヤ暦に基づいた総合的なコンサルティングシステムのMVP

## 概要

このシステムは、算命学とマヤ暦の知識を活用し、生年月日から決定論的に計算された結果をもとに、女性向けの総合的なアドバイスを提供します。

### 特徴

- **決定論的計算**: 算命学とマヤ暦のアルゴリズムは完全に決定論的で、同じ入力には常に同じ結果を返します
- **LLM整形**: 大規模言語モデルは説明文の整形のみに使用し、計算結果には影響しません
- **4つのUI画面**: ホーム（入力）、結果表示、履歴、管理画面
- **カスタマイズ可能**: 温度・煽り度のスライダーで出力トーンを調整可能

## プロジェクト構造

```
.
├── app/
│   ├── frontend/          # React + Vite フロントエンド
│   │   ├── src/
│   │   │   ├── pages/    # ページコンポーネント
│   │   │   ├── components/ # 共通コンポーネント
│   │   │   ├── App.tsx
│   │   │   └── main.tsx
│   │   ├── package.json
│   │   └── vite.config.ts
│   ├── api/               # Python Flask バックエンド（実装予定）
│   └── tests/             # テストコード
├── 算命学の要件定義書.md
├── 算命学命式計算アルゴリズム仕様.md
└── README.md
```

## セットアップ

### 必要な環境

- Node.js 18以上
- npm または yarn
- Python 3.11以上（バックエンド実装時）

### フロントエンドの起動

```bash
cd app/frontend
npm install
npm run dev
```

ブラウザで http://localhost:3000/ にアクセス

### 現在の実装状況

✅ **完了**
- フロントエンドUI（4ページ）
- 入力フォーム（生年月日、出生時刻、カテゴリ選択）
- 結果表示（モックデータ）
- LLM設定スライダー
- レスポンシブデザイン

🚧 **実装中**
- バックエンドAPI（Flask + Python）
- 算命学の命式計算ロジック
- マヤ暦の計算ロジック
- Google Sheets連携
- LLM統合（OpenAI API）

📋 **今後の予定**
- 認証・認可機能
- PDF出力
- メール配信
- レート制限
- デプロイ（Render + Vercel）

## 画面紹介

### 1. ホーム（入力画面）
- 生年月日の入力（必須）
- 出生時刻・出生地（任意）
- 相談カテゴリの選択
- 温度・煽り度の調整

### 2. 結果画面
- 総合スコア表示
- 算命学の分析結果（日干支、主星、従星、五行バランス）
- マヤ暦の分析結果（Kin、太陽の紋章、銀河の音）
- タブ切り替えで各テーマ別の詳細表示

### 3. 履歴画面
- 過去の分析履歴一覧
- カテゴリ・日付フィルタ
- CSV出力（実装予定）

### 4. 管理画面
- スコア重み設定（算命学/マヤ暦）
- LLM設定（最大トークン数）
- レート制限設定
- 利用統計表示

## 技術スタック

### フロントエンド
- **React 18**: UIフレームワーク
- **TypeScript**: 型安全性
- **Vite**: ビルドツール
- **Zustand**: 状態管理（実装予定）
- **Axios**: HTTP通信（実装予定）

### バックエンド（実装予定）
- **Python 3.11**: プログラミング言語
- **Flask**: Webフレームワーク
- **Pydantic**: データバリデーション
- **Google Sheets API**: データストレージ
- **OpenAI API**: LLM統合

## API仕様（実装予定）

### POST /api/v1/analyze
生年月日から算命学とマヤ暦を分析

**リクエスト:**
```json
{
  "birthdate": "1992-07-15",
  "birth_time": "12:00",
  "birth_place": "Tokyo",
  "categories": ["仕事", "恋愛"],
  "llm_prefs": {
    "temperature": 0.5,
    "intensity": 6,
    "max_tokens": 800
  }
}
```

**レスポンス:**
```json
{
  "request_id": "uuid",
  "data": {
    "suanming": {...},
    "maya": {...},
    "scores": {...},
    "insights": [...]
  }
}
```

## 開発

### コミット規約
```
feat: 新機能
fix: バグ修正
docs: ドキュメント
style: コードスタイル
refactor: リファクタリング
test: テスト
```

### ブランチ戦略
- `main`: 本番環境
- `develop`: 開発環境
- `feature/*`: 新機能
- `fix/*`: バグ修正

## 免責事項

本サービスはエンターテインメント・自己理解支援を目的としています。医療・法律・投資助言ではありません。

## ライセンス

未定

## 連絡先

GitHub Issues: https://github.com/taiyousan15/suumeigaku-maya-consul-system/issues
